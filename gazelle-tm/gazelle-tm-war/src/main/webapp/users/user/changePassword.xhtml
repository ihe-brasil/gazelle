<ui:composition xmlns:a4j="http://richfaces.org/a4j" xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns="http://www.w3.org/1999/xhtml" template="/layout/template.xhtml">
    <ui:param name="pageNameTitle" value="#{messages['gazelle.users.user.ChangePassword']}"/>
    <ui:define name="body">
        <div class="row">
            <div class="col-lg-6 col-lg-offset-3">
                <div class="row">
                    <ui:decorate template="/layout/panels/_panel_title_id.xhtml">
                        <ui:param name="panel_id" value="changeUserPasswordPanel"/>
                        <ui:define name="panel_title">#{messages['gazelle.users.user.ChangePasswordUserLabel1']}
                        </ui:define>
                        <div id="userManager">
                            <!--  /!\ WARNING : The current id (for form) is used as a reference within Javascript for the password encryption - DO NOT CHANGE IT -->
                            <h:form id="register">
                                <s:token allowMultiplePosts="true"/>
                                <!--  /!\ END - WARNING : The current id (for form) is used as a reference within Javascript for the password encryption - DO NOT CHANGE IT -->
                                <a4j:region id="currentPasswordRegion">
                                    <!--  /!\ WARNING : The current ids (for decorate and inputs) are used as a reference within Javascript for the password encryption - DO NOT CHANGE IT -->
                                    <s:decorate id="currentPasswordDecoration"
                                                template="/layout/form/_form_field_horizontal_4-8.xhtml">
                                        <ui:param name="id" value="oldPasswordInputNotHashed"/>
                                        <ui:define name="label">
                                            #{messages['gazelle.users.registration.CurrentPassword']}
                                        </ui:define>
                                        <h:inputSecret id="oldPasswordInputNotHashed" tabindex="1"
                                                       styleClass="form-control"
                                                       size="30" maxlength="128" required="true"
                                                       value="#{userPreferencesManager.selectedUser.oldPassword}"/>
                                        <h:inputHidden id="oldPasswordInput" name="oldPasswordInput"
                                                       value="#{userPreferencesManager.selectedUser.oldPassword}"/>
                                    </s:decorate>
                                    <!--  /!\ END - WARNING : The current ids (for decorate and inputs) are used as a reference within Javascript for the password encryption - DO NOT CHANGE IT -->
                                </a4j:region>
                                <a4j:region id="passwordRegion">
                                    <!--  /!\ WARNING : The current ids (for decorate and inputs) are used as a reference within Javascript for the password encryption - DO NOT CHANGE IT -->
                                    <s:decorate id="passwordDecoration"
                                                template="/layout/form/_form_field_horizontal_4-8.xhtml">
                                        <ui:param name="id" value="passwordInputNotHashed"/>
                                        <ui:define name="label">#{messages['gazelle.users.registration.Password']}
                                        </ui:define>
                                        <h:inputSecret id="passwordInputNotHashed" tabindex="2" size="30"
                                                       styleClass="form-control"
                                                       maxlength="128" required="true"
                                                       value="#{userPreferencesManager.selectedUser.password}"/>
                                        <h:inputHidden id="passwordInput" name="passwordInput"
                                                       value="#{userPreferencesManager.selectedUser.password}"/>
                                    </s:decorate>
                                    <!--  /!\ END - WARNING : The current ids (for decorate and inputs) are used as a reference within Javascript for the password encryption - DO NOT CHANGE IT -->
                                </a4j:region>
                                <a4j:region id="passwordConfirmationRegion">
                                    <!--  /!\ WARNING : The current ids (for decorate and inputs) are used as a reference within Javascript for the password encryption - DO NOT CHANGE IT -->
                                    <s:decorate id="passwordConfirmationDecoration"
                                                template="/layout/form/_form_field_horizontal_4-8.xhtml">
                                        <ui:param name="id" value="passwordConfirmationInputNotHashed"/>
                                        <ui:define name="label">
                                            #{messages['gazelle.users.registration.PasswordConfirmation']}
                                        </ui:define>
                                        <h:inputSecret id="passwordConfirmationInputNotHashed" tabindex="3"
                                                       styleClass="form-control"
                                                       size="30" maxlength="128" required="true"
                                                       value="#{userPreferencesManager.selectedUser.passwordConfirmation}"/>
                                        <h:inputHidden id="passwordConfirmationInput" name="passwordConfirmationInput"
                                                       value="#{userPreferencesManager.selectedUser.passwordConfirmation}"/>
                                    </s:decorate>
                                    <!--  /!\ END - WARNING : The current ids (for decorate and inputs) are used as a reference within Javascript for the password encryption - DO NOT CHANGE IT -->
                                </a4j:region>
                                <div id="requiredDiv" style="clear: both"><span class="required">*</span>
                                    #{messages['gazelle.common.RequiredFields']}
                                </div>
                                <div id="updateActionButtonDiv">
                                    <a4j:commandButton id="save" type="submit"
                                                       onclick="hashGazelleChangeCurrentLoggedUserPassword();"
                                                       oncomplete="document.getElementById('register:save').disabled=false;"
                                                       action="#{userPreferencesManager.changePassword()}"
                                                       value="#{messages['gazelle.common.button.Update']}"
                                                       styleClass="gzl-btn-orange"
                                                       render="register">
                                    </a4j:commandButton>
                                </div>
                            </h:form>
                        </div>
                    </ui:decorate>

                    <h:form id="changePasswordCancelButtonForm">
                        <s:token allowMultiplePosts="true"/>
                        <div id="cancelActionButtonDiv">
                            <a4j:commandButton id="back" value="#{messages['gazelle.common.button.Cancel']}"
                                               action="/users/user/userPreferences.seam" styleClass="gzl-btn"
                                               immediate="true"/>
                        </div>
                    </h:form>

                </div>
            </div>
        </div>


    </ui:define>
</ui:composition>
